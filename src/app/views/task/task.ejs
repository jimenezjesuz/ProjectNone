<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>TASK</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <nav class="navbar navbar-dark bg-primary">
        <a href="#" style="background-color: #146daf;
        padding: 10px;
        border-radius: 15px;
        font-weight: bold;" class="navbar-brand">Task</a>
    </nav>
    <div class="container">
        <div class="row">
            <div class="col-md-8 mt-4 text-center">
                <div class="form-group">
                        <input type="text" id="myInput" class="form-control" onkeyup="myFunction()"
                        placeholder="Search for names..">
                </div>
                
                <table class="table table-striped" id="myTable">
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>User</th>
                        <th>Status</th>
                    </tr>
                    <% for(var i = 0; i < taskLits.length; i++){ %>
                    <tr>
                        <td><%= taskLits[i].name %></td>
                        <td><%= taskLits[i].description %></td>
                        <td><%= taskLits[i].id_user %></td>
                        <td><%= taskLits[i].id_status_task %></td>
                        <td>
                            <a class="btn btn-success edit" href="../task/edit/<%=taskLits[i].id%>">Edit</a>
                            <a class="btn btn-danger delete" onclick="return alert('Are You sure?')"
                                href="../task/delete/<%=taskLits[i].id%>">Delete User</a>
                        </td>
                    </tr>
                    <% } %>
                </table>
            </div>
            <div class="col-md-4 mt-4 card">
                <form action="/task" method="POST" class="card-body">
                    <h3 class="card-title">Add Task</h3>
                    <div class="form-group">
                        <input type="text" name="name" required class="form-control" placeholder="Name">
                    </div>
                    <div class="form-group">
                        <input type="text" name="description" required class="form-control" placeholder="Description">
                    </div>
                    <div class="form-group">
                        <select name="id_status_task" class="form-control">
                            <option selected value="0"> -- select a status -- </option>
                            <%for(j=0; j<statusList.length; j++){%>
                            <option value="<%= statusList[j].id%>">
                                <%= statusList[j].name %>
                            </option>
                            <%}%>
                    </select>
                    </div>
                
                    <div class="form-group">
                        <select name="id_user" class="form-control">
                            <option selected value="0" > -- select a user -- </option>
                            <%for(k=0; k<userList.length; k++){%>
                            <option value=" <%= userList[k].id_user %>">
                                <%= userList[k].name %>
                            </option>
                            <%}%>
                    </select>
                </div>
                    <input type="submit" class="btn btn-primary">
                </form>
            </div>
        </div>
    </div>
</body>
<script>
    function myFunction() {
        // Declare variables
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("myTable");
        tr = table.getElementsByTagName("tr");

        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
</script>
</html>